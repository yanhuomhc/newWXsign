<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yanhuo.sign.dal.mapper.ext.SignExtMapper" >
    <resultMap id="BaseResultMap" type="com.yanhuo.sign.dal.model.Sign">
        <id column="sign_id" jdbcType="BIGINT" property="signId" />
        <result column="begin_sign_time" jdbcType="DATE" property="beginSignTime" />
        <result column="s_id" jdbcType="BIGINT" property="sId" />
        <result column="c_name" jdbcType="VARCHAR" property="cName" />
        <result column="c_location" jdbcType="VARCHAR" property="cLocation" />
        <result column="is_sign" jdbcType="BIT" property="isSign" />
        <result column="sign_time" jdbcType="DATE" property="signTime" />
        <result column="t_name" jdbcType="VARCHAR" property="tName" />
        <result column="t_id" jdbcType="INTEGER" property="tId" />
        <result column="sign_num" jdbcType="INTEGER" property="signNum" />
        <result column="s_class" jdbcType="BIGINT" property="sClass" />
    </resultMap>
    <select id="selectCourseBycName" parameterType="java.lang.String" resultMap="BaseResultMap">
        select sign_id, begin_sign_time, s_id, c_name, c_location, is_sign, sign_time, t_name,
        t_id, sign_num, s_class
        from sign
        where c_name = #{cName}
    </select>

    <select id="selectSignDetailBysClass" parameterType="java.lang.Long" resultMap="BaseResultMap">
        select sign_id, begin_sign_time, s_id, c_name, c_location, is_sign, sign_time, t_name,
        t_id, sign_num, s_class
        from sign
        where s_class = #{sClass}
    </select>

    <select id="selectCourseBysignNum" parameterType="java.lang.Integer" resultMap="BaseResultMap">
        select sign_id, begin_sign_time, s_id, c_name, c_location, is_sign, sign_time, t_name,
        t_id, sign_num, s_class
        from sign
        where sign_num = #{signNum}
    </select>

    <select id="selectSignDetailBysId" parameterType="java.lang.Long" resultMap="BaseResultMap">
        select sign_id, begin_sign_time, s_id, c_name, c_location, is_sign, sign_time, t_name,
        t_id, sign_num, s_class
        from sign
        where s_id = #{sId}
    </select>

    <!--List:foreach中的collection属性类型是List,collection的值必须是：list，item的值随意，-->
    <update id="updateSignStatus" parameterType="com.yanhuo.sign.dal.model.Sign" >
        update sign
        set is_sign = 1
        where s_id in
        <foreach collection="list" item="sId"  open="(" separator="," close=")">
            #{sId}
        </foreach>
    </update>

</mapper>